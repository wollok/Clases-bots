import bots.*
import fixture.*
test "pdpwitter recibe tweets" {
	pdpwitter.recibirTweet(fixture.tweetValido('hola'))
	assert.equals(1, pdpwitter.tweets().size())
}

test "pdpwitter empieza sin tweets" {
	assert.equals(0, pdpwitter.tweets().size())
}
test "pdpwitter detecta tweets de un usuario si los hay" {
	pdpwitter.recibirTweet(fixture.tweetValido('hola'))
	assert.equals(1, pdpwitter.tweetsParaUsuario('hola').size())
}
test "pdpwitter detecta tweets de un usuario si no los hay" {
	pdpwitter.recibirTweet(fixture.tweetValido('hola2'))
	assert.equals(0, pdpwitter.tweetsParaUsuario('hola').size())
}


test "un tweet sabe si es largo" {
	assert.notThat(fixture.tweetValido('hola').esDemasiadoLargo())
}

test "un tweet sabe si no es largo" {
	assert.that(fixture.tweetLargo().esDemasiadoLargo())
}

test "un analista recibe todo tweet" {
	var botAnalista = fixture.botAnalista()
	pdpwitter.agregarBot(botAnalista)
	pdpwitter.recibirTweet(fixture.tweetValido('hola'))
	pdpwitter.recibirTweet(fixture.tweetValido('hola'))
	assert.equals(2, botAnalista.tweets().size())
}